# LibreChat Docker Compose Override Configuration
# This file adds Ollama to your LibreChat setup

services:
  api:
    volumes:
      - ./librechat.yaml:/app/librechat.yaml:ro
    extra_hosts:
      - "host.docker.internal:host-gateway"
    environment:
#     - OLLAMA_BASE_URL=http://ollama:11434  # Note: Changed to use Docker network
      - OLLAMA_BASE_URL=http://host.docker.internal:11434

  # Ollama service
  #ollama:
  #  image: ollama/ollama:latest
  #  container_name: LibreChat-Ollama
  #  restart: always
  #  ports:
  #    - "11434:11434"
  #  volumes:
    # - ./ollama:/root/.ollama  # Persistent storage for models
      - /Users/pawangupta/.ollama:/root/.ollama  # Persistent storage for models
    # Uncomment below if you have NVIDIA GPU
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: all
    #           capabilities: [gpu]
