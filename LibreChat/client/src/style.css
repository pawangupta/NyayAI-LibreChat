@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   Claude-inspired theme for LiberChat UI
   Light + Dark mode with warm amber/orange
   ========================================= */

/* Base tokens (fallbacks) */
:root{
  --claude-amber-50: #fef6ee;
  --claude-amber-100: #fdecd3;
  --claude-amber-200: #fad6a6;
  --claude-amber-300: #f7ba6e;
  --claude-amber-400: #f39b45;
  --claude-amber-500: #cc7a2e; /* primary */
  --claude-amber-600: #a0591f;
  --claude-amber-700: #824519;

  --neutral-50: #fafaf9;
  --neutral-100: #f5f5f4;
  --neutral-200: #e7e5e4;
  --neutral-300: #d6d3d1;
  --neutral-400: #a8a29e;
  --neutral-500: #78716c;
  --neutral-600: #57534e;
  --neutral-700: #44403c;
  --neutral-800: #1c1917;

  --bg: 255 255 255;
  --fg: 28 25 23;

  --radius-lg: 0.75rem;
  --radius-md: 0.5rem;
  --radius-sm: 0.375rem;

  --shadow-subtle: 0 1px 2px rgba(8,10,12,0.04);
  --shadow-md: 0 6px 18px rgba(16, 24, 40, 0.06);

  --transition-fast: 150ms ease;
  --content-max-width: 65ch;

  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Inter, Roboto, "Helvetica Neue", Arial, sans-serif;
  --mono-font: "Roboto Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, "Courier New", monospace;
}

/* LIGHT THEME (Claude warm light) */
html:not(.dark) {
  --bg: 255 255 255;
  --fg: 28 25 23;
  --surface-1: 255 255 255;
  --surface-2: 250 250 249;
  --muted: 115 109 102;
  --accent: 204 122 46; /* rgba(204,122,46) ~ amber */
  --accent-hex: #cc7a2e;
  --accent-hover-hex: #a0591f;
  --border: 230 229 228;
  --bubble-user: 245 245 244;    /* warm subtle */
  --bubble-assistant: 255 255 255;
  color: rgb(var(--fg));
  background-color: rgb(var(--bg));
}

/* DARK THEME (Claude warm dark) */
html.dark, .dark {
  --bg: 28 25 23;               /* very warm near-black */
  --fg: 250 250 249;            /* warm near-white */
  --surface-1: 28 25 23;
  --surface-2: 41 37 36;
  --muted: 215 211 209;
  --accent: 243 155 69;         /* brighter amber for dark */
  --accent-hex: #f39b45;
  --accent-hover-hex: #cc7a2e;
  --border: 68 67 63;
  --bubble-user: 41 37 36;
  --bubble-assistant: 28 25 23;
  color: rgb(var(--fg));
  background-color: rgb(var(--bg));
}

/* Global text, root sizing */
html, body, #root, #__next {
  height: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-size: 16px;
  line-height: 1.6;
}

/* Prose / markdown */
.prose, .markdown {
  max-width: var(--content-max-width);
  color: rgb(var(--fg));
  font-size: 1rem;
  line-height: 1.7;
  word-wrap: break-word;
}

/* Headings */
.prose h1, .prose h2, .prose h3, .prose h4 {
  color: rgb(var(--fg));
  font-weight: 600;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

/* Bubbles - user and assistant */
.message-bubble, .message-content {
  display: inline-block;
  padding: 0.8rem 1rem;
  border-radius: 1rem;
  max-width: 85%;
  box-shadow: var(--shadow-subtle);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  white-space: pre-wrap;
  word-break: break-word;
}

/* User messages (right aligned) */
.message-row.user {
  justify-content: flex-end;
  align-items: flex-end;
}
.message-row.user .message-bubble {
  background-color: rgb(var(--bubble-user));
  color: rgb(var(--fg));
  border-radius: 1rem 1rem 0.25rem 1rem;
}

/* Assistant messages (left aligned) */
.message-row.assistant {
  justify-content: flex-start;
  align-items: flex-start;
}
.message-row.assistant .message-bubble {
  background-color: rgb(var(--bubble-assistant));
  color: rgb(var(--fg));
  border-radius: 1rem 1rem 1rem 0.25rem;
}

/* Subtle hover elevation */
.message-bubble:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

/* Timestamps, meta */
.message-meta {
  font-size: 0.8rem;
  color: rgba(var(--muted), 0.85);
  margin-top: 0.35rem;
}

/* Input box style */
.chat-input {
  background-color: rgb(var(--surface-1));
  border: 1px solid rgba(var(--border), 0.9);
  border-radius: var(--radius-md);
  padding: 0.6rem 0.75rem;
  color: rgb(var(--fg));
  transition: box-shadow var(--transition-fast), border-color var(--transition-fast);
}
.chat-input:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(var(--accent), 0.08);
  border-color: var(--accent-hex);
}

/* Buttons */
.btn, button {
  border-radius: var(--radius-md);
  padding: 0.5rem 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform var(--transition-fast), background-color var(--transition-fast), box-shadow var(--transition-fast);
}
.btn-primary {
  background-color: var(--accent-hex);
  color: white;
  border: 1px solid rgba(0,0,0,0.04);
}
.btn-primary:hover { background-color: var(--accent-hover-hex); transform: translateY(-1px); }
.btn-secondary {
  background-color: transparent;
  color: rgb(var(--fg));
  border: 1px solid rgba(var(--border), 0.9);
}
.btn-ghost { background: transparent; border: none; color: rgb(var(--fg)); }

/* Links */
a, .prose a {
  color: var(--accent-hex);
  text-decoration: none;
  transition: color var(--transition-fast);
}
a:hover, .prose a:hover { color: var(--accent-hover-hex); text-decoration: underline; }

/* Form controls */
.form-input, .form-textarea, select {
  background: rgb(var(--surface-1));
  border: 1px solid rgba(var(--border), 0.9);
  border-radius: var(--radius-md);
  color: rgb(var(--fg));
  padding: 0.55rem 0.75rem;
}
.form-input::placeholder { color: rgba(var(--muted), 0.6); }

/* Code block styling */
.prose pre, .prose code {
  font-family: var(--mono-font);
  background: rgba(var(--neutral-100, 231 229 228), 1);
  padding: 0.8rem;
  border-radius: 0.4rem;
  color: rgb(var(--fg));
  overflow: auto;
}
html.dark .prose pre, html.dark .prose code {
  background: rgba(41,37,36,1);
  border: 1px solid rgba(68,67,63,0.8);
  color: #f3efe9;
}

/* Tiny UI tokens */
.icon-sm { height: 1rem; width: 1rem; stroke-width: 1.5; }
.icon-md { height: 1.25rem; width: 1.25rem; stroke-width: 1.5; }

/* Tiny badge / streaming dot (Claude style) */
.result-streaming li:after {
  content: '⬤';
  display:inline-block;
  width:10px;height:10px;border-radius:50%;
  background: var(--accent-hex);
  margin-left: 0.35rem; vertical-align: middle;
  opacity: 0.9;
}

/* Scrollbar (subtle) */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-thumb { background: rgba(var(--border), 0.45); border-radius: 6px; }
html.dark ::-webkit-scrollbar-thumb { background: rgba(68,67,63,0.5); }

/* Small utility overrides (prefer CSS vars) */
.rounded-lg { border-radius: var(--radius-lg) !important; }
.rounded-md { border-radius: var(--radius-md) !important; }

/* Accessibility focus */
*:focus-visible { outline-offset: 2px; box-shadow: 0 0 0 4px rgba(var(--accent), 0.12); }

/* Subtle global shadows for panels */
.panel { background: rgb(var(--surface-1)); border-radius: var(--radius-md); box-shadow: var(--shadow-subtle); border: 1px solid rgba(var(--border), 0.85); }

/* Prose niceties */
.prose p { margin-bottom: 0.85em; }

/* -------------------------------------------------------
   Claude-style refinements (spacing, fonts, metadata)
   ------------------------------------------------------- */

/* Better global font stack */
body, html, .prose, .message-bubble, .chat-input {
  font-family: "Inter", "SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif !important;
  letter-spacing: -0.01em;
}

/* Bubble width + padding refinement */
.message-bubble {
  max-width: min(75%, 65ch) !important;
  padding: 0.65rem 0.9rem !important;
  border-radius: 0.75rem !important;
}

/* Assistant bubbles slightly lighter (Claude look) */
.message-row.assistant .message-bubble {
  background: rgb(var(--surface-2)) !important;
}

/* User bubbles slightly darker contrast */
.message-row.user .message-bubble {
  background: rgba(var(--bubble-user), 1) !important;
}

/* Remove bubble jumpiness on hover - more subtle */
.message-bubble:hover {
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08) !important;
}

/* Chat metadata cleanup (Claude style) */
.message-meta,
.message-row .role-label {
  font-size: 0.72rem !important;
  color: rgba(var(--muted), 0.65) !important;
  margin-bottom: 0.15rem !important;
}

/* Role label ("Will Generator") smaller + softer */
.role-label {
  font-weight: 500 !important;
  letter-spacing: -0.01em;
}

/* Input area: cleaner, softer, Claude-like */
.chat-input {
  background: rgb(var(--surface-2)) !important;
  border: 1px solid rgba(var(--border), 0.6) !important;
  border-radius: 0.75rem !important;
  padding: 0.75rem 1rem !important;
}
.chat-input:focus {
  box-shadow: 0 0 0 3px rgba(var(--accent), 0.15) !important;
}

/* Buttons smaller + smoother (Claude-style) */
button, .btn {
  border-radius: 0.5rem !important;
  padding: 0.45rem 0.8rem !important;
  font-size: 0.92rem !important;
}

/* Inline image previews (reduce border + radius) */
.message-bubble img {
  border-radius: 0.5rem !important;
  margin: 0.5rem 0;
}

/* Tool icons (copy, retry, etc.) */
.message-tools button {
  opacity: 0.65 !important;
  transition: opacity 0.15s ease;
}
.message-tools button:hover {
  opacity: 1 !important;
}


/* ============================================
   High-specificity final overrides (nuclear)
   ensures other frameworks don't leak through
   ============================================ */
html.dark a, html.dark a:link, html.dark a:visited,
body.dark a, .dark a, .dark [class*="prose"] a, .dark .message-bubble a {
  color: var(--accent-hex) !important;
}
html.dark button[class*="bg-"], .dark button[class*="bg-"] {
  background-color: var(--accent-hex) !important;
  color: #111 !important;
}

/* Force user/assistant bubble contrast for all other helper classes */
html:not(.dark) .user-message, html:not(.dark) .assistant-message { color: rgb(var(--fg)) !important; }
html.dark .user-message, .dark .user-message, html.dark .assistant-message, .dark .assistant-message { color: rgb(var(--fg)) !important; }

/* Small responsive helper */
@media (max-width: 640px) {
  .message-bubble { max-width: 92%; padding: 0.7rem; font-size: 0.95rem; }
  .prose { font-size: 0.95rem; line-height: 1.6; }
}

/* =========================================================
   FORCE CLAUDE COLOR PALETTE FOR LINKS + BUTTONS
   ========================================================= */

/* GLOBAL LINK COLOR OVERRIDES */
a,
a:link,
a:visited,
.prose a,
.message-bubble a,
html:not(.dark) a,
html:not(.dark) .prose a {
  color: var(--accent-hex) !important;
  text-decoration: none !important;
}

a:hover,
.prose a:hover,
.message-bubble a:hover {
  color: var(--accent-hover-hex) !important;
  text-decoration: underline !important;
}

/* DARK MODE LINK OVERRIDES */
html.dark a,
html.dark a:link,
html.dark a:visited,
html.dark .prose a,
.dark .prose a {
  color: var(--accent-hex) !important;
}

html.dark a:hover,
.dark a:hover {
  color: var(--accent-hover-hex) !important;
  text-decoration: underline !important;
}

/* =========================================================
   BUTTON COLOR OVERRIDES (Claude orange palette)
   ========================================================= */

/* Primary buttons */
button,
.btn,
.btn-primary,
[type="button"],
[type="submit"],
[type="reset"] {
  background-color: var(--accent-hex) !important;
  border-color: var(--accent-hex) !important;
  color: white !important;
}

/* Hover state */
button:hover,
.btn-primary:hover {
  background-color: var(--accent-hover-hex) !important;
  border-color: var(--accent-hover-hex) !important;
}

/* Secondary buttons — warm neutral (Claude style) */
.btn-secondary,
button.secondary {
  background: transparent !important;
  color: rgb(var(--fg)) !important;
  border: 1px solid rgba(var(--border), 0.8) !important;
}

/* Icon-only buttons */
button svg,
.btn svg {
  stroke: currentColor !important;
}

/* Disable Tailwind ring overriding colors */
button:focus-visible,
.btn:focus-visible {
  box-shadow: 0 0 0 3px rgba(var(--accent), 0.25) !important;
  outline: none !important;
}
/* ---------- Font imports (only if you didn't add <link> in head) ----------

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap');

#------------*/

/* Typography tokens */
:root {
  --ui-font: "Inter", -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --brand-font: "Playfair Display", Georgia, "Times New Roman", serif;

  --brand-size: 3.5rem;       /* logo / brand on left */
  --h1-size: 1.75rem;         /* card / major headings */
  --query-size: 1.375rem;     /* big prompt text in assistant card */
  --body-size: 1rem;          /* default body */
  --muted-size: 0.8125rem;    /* micro text */

  --content-line-height: 1.6;
  --heading-line-height: 1.2;
}

/* Brand / left column title */
.brand-title {
  font-family: var(--brand-font);
  font-weight: 700;
  font-size: var(--brand-size);
  line-height: 0.95;
  margin: 0 0 1rem 0;
  color: rgb(var(--fg)); /* uses your color tokens */
}

/* Sidebar menu items (compact like screenshot) */
.sidebar .menu-item {
  font-family: var(--ui-font);
  font-size: 0.95rem; /* slightly smaller to match screenshot */
  font-weight: 500;
  color: rgba(var(--muted), 0.95);
  padding: 14px 16px;
}

/* Assistant card — container and inner title */
.assistant-card {
  border-radius: 0.75rem;
  padding: 1.25rem 1.5rem;
  background: rgb(var(--surface-1));
  border: 1px solid rgba(var(--border), 0.6);
}

/* Assistant title (like 'Assist' tab heading) */
.assistant-card .card-title {
  font-family: var(--ui-font);
  font-size: var(--h1-size);
  line-height: var(--heading-line-height);
  margin: 0 0 0.75rem 0;
  font-weight: 600;
  color: rgb(var(--fg));
}

/* Query / prompt text (big) */
.assistant-card .query-text {
  font-family: var(--ui-font);
  font-size: var(--query-size);
  line-height: var(--content-line-height);
  margin: 1rem 0 1.25rem 0;
  color: rgba(var(--fg), 0.96);
  max-width: 65ch;
}

/* CTA button (big dark rounded like screenshot) */
.cta-ask {
  display: inline-block;
  width: 100%;
  padding: 1rem 1.25rem;
  font-family: var(--ui-font);
  font-weight: 600;
  font-size: 1.125rem;
  background: #2e2b29; /* dark button; override with var(--accent-hex) if needed */
  color: #fff;
  border-radius: 0.75rem;
  border: none;
  text-align: center;
  box-shadow: 0 6px 18px rgba(16,24,40,0.08);
  cursor: pointer;
}

/* CTA hover */
.cta-ask:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(16,24,40,0.12);
}

/* Sources list (card-like items) */
.sources-list .source-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 18px;
  border-radius: 0.6rem;
  border: 1px solid rgba(var(--border), 0.6);
  background: rgb(var(--surface-2));
  margin-bottom: 0.75rem;
  font-family: var(--ui-font);
  font-size: var(--body-size);
}

/* Micro text */
.small-muted {
  font-size: var(--muted-size);
  color: rgba(var(--muted), 0.85);
}

/* Input (message) box tweaks */
.chat-input {
  font-family: var(--ui-font);
  font-size: 1rem;
  padding: 0.9rem 1rem;
  border-radius: 999px;
  border: 1px solid rgba(var(--border), 0.9);
}

/* Accessibility: ensure contrast of big CTA meets AA */
@media (prefers-contrast: more) {
  .cta-ask { box-shadow: none; border: 2px solid rgba(0,0,0,0.08); }
}

/* Responsive: reduce query text on small screens */
@media (max-width: 780px) {
  :root { --query-size: 1.125rem; }
  .brand-title { font-size: 2.25rem; }
  .assistant-card { padding: 1rem; }
}
